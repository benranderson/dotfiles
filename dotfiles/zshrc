#
# Executes commands at the start of an interactive session.
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# pyenv config
if command -v pyenv 1>/dev/null 2>&1; then
  eval "$(pyenv init -)"
fi
if which pyenv-virtualenv-init > /dev/null; then
  eval "$(pyenv virtualenv-init -)"
fi

# https://github.com/pyenv/pyenv/issues/1219#issuecomment-684140087
export PYTHON_CONFIGURE_OPTS="--with-openssl=$(brew --prefix openssl)"
export CFLAGS="-I$(brew --prefix zlib)/include -I$(brew --prefix sqlite)/include -I$(brew --prefix bzip2)/include"
export LDFLAGS="-L$(brew --prefix zlib)/lib -L$(brew --prefix sqlite)/lib -L$(brew --prefix bzip2)/lib"

# aliases
alias git="/usr/local/bin/git"
alias gcm="git checkout master"
alias gac="git add -A && git commit -m"
alias gp="git push --follow-tags"
alias gnb="git checkout -b"
alias gdb="git branch -d"
alias grm="git rebase master"
alias work="./.work.sh"
alias update="./.update-tools.sh"

# ensure packages are only installed in an active virtual environment
export PIP_REQUIRE_VIRTUALENV=true

# pipx config
export PATH="$PATH:/Users/benranderson/.local/bin"

# load Azure environment variables
source ~/.azure.sh
